<!-- This file is part of Thinks. -->

<!-- Thinks is free software: you can redistribute it and/or modify -->
<!-- it under the terms of the GNU Affero Public License as published by -->
<!-- the Free Software Foundation, either version 3 of the License, or -->
<!-- (at your option) any later version. -->

<!-- Thinks is distributed in the hope that it will be useful, -->
<!-- but WITHOUT ANY WARRANTY; without even the implied warranty of -->
<!-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the -->
<!-- GNU Affero Public License for more details. -->

<!-- You should have received a copy of the GNU Affero Public License -->
<!-- along with Thinks.  If not, see <http://www.gnu.org/licenses/>. -->

<!-- Copyright (c) 2015, Claudio Maradonna -->

<h1 class="chapter-title">
  <%= t('.notifications') %>
</h1>
<%- project_id = nil %>
<div class="panel panel-default">
    <% if @notifications.empty? %>
        <div class="list-group">
            <div class="list-group-item">
                <%= t ".no_notifications_found" %>
            </div>
        </div>
    <% end %>
    <% @notifications.each do |notification| %>
        <% if notification.project.id != project_id %>
            <% if !project_id.nil? %>
                </div>
            <% end %>
            <% project_id = notification.project.id %>
            <div class="panel-heading">
                <strong>
                    <%= notification.project.title %>
                </strong>
                <%= link_to project_read_all_path(notification.project), :class => "pull-right fa-fw", :method => :put do %>
                    <%= icon('check') %>
                <% end %>
            </div>
            <div class="list-group">
        <% end %>
        <div class="list-group-item">
            <%= icon_for(notification) %>
            <% if notification.project.deleted? %>
                <%= title_for(notification) %>
            <% else %>
                <%= link_to (url_for_notifications(notification)) do %>
                    <%= title_for(notification) %>
                <% end %>
            <% end %>
            <%= link_to notification_read_path(notification), :class => "pull-right fa-fw", :method => :put do %>
                <%= icon('check') %>
            <% end %>
        </div>
    <% end %>
</div>
