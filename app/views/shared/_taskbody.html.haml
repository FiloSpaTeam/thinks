-# This file is part of Thinks.

-# Thinks is free software: you can redistribute it and/or modify
-# it under the terms of the GNU Affero Public License as published by
-# the Free Software Foundation, either version 3 of the License, or
-# (at your option) any later version.

-# Thinks is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU Affero Public License for more details.

-# You should have received a copy of the GNU Affero Public License
-# along with Thinks.  If not, see <http://www.gnu.org/licenses/>.

-# Copyright (c) 2015, Claudio Maradonna

.panel.panel-warning
  .panel-heading
    %h4
      %strong
        \##{task.serial}
        = link_to task.title, task_path(task)
    %small.dark-grey
      created at <strong>#{task.created_at.to_s(:long)}</strong> by #{task.thinker.name}
      %br
      updated at <strong>#{task.updated_at.to_s(:long)}</strong> by #{task.updater.name}
  .panel-body
    = markdown(task.description)
  - if task.thinker == current_thinker || scrum_master?(task.project)
    .panel-footer
      = link_to t('edit'), edit_task_path(task), :class => "btn btn-primary"
      - if task.deleted?
        = link_to t('reopen'), reopen_task_path(task), :method => 'put', :class => 'btn btn-warning pull-right'
      - else
        = link_to t('close'), task_path(task), :method => 'delete', :class => 'btn btn-danger pull-right'
